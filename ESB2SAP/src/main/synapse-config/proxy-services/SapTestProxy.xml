<?xml version="1.0" encoding="UTF-8"?>
<proxy name="SapTestProxy" startOnLoad="true" trace="disable"
  transports="http https" xmlns="http://ws.apache.org/ns/synapse">
  <target>
    <inSequence>
      <log level="custom" separator=",">
        <property name="STATUS" value="Starting SapStoreForwardProxy"/>
      </log>
      <sequence key="SapBasicAuthenticationSequence"/>
      <sequence key="SapSendOutSequence"/>
      <store description="Vbe2SapMessageStore" messageStore="Vbe2SapMessageStore"/>
      <respond/>
    </inSequence>
    <outSequence>
      <log category="DEBUG" level="full"/>
      <send/>
    </outSequence>
    <faultSequence>
      <log category="ERROR" level="custom">
        <property name="text" value="An unexpected error occured"/>
        <property expression="get-property('ERROR_MESSAGE')" name="message"/>
        <property expression="get-property('ERROR_CODE')" name="code"/>
        <property expression="get-property('ERROR_DETAIL')" name="detail"/>
        <property expression="get-property('ERROR_EXCEPTION')" name="exception"/>
      </log>
      <send/>
    </faultSequence>
  </target>
</proxy>
