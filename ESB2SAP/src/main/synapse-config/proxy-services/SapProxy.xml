<?xml version="1.0" encoding="UTF-8"?>
<proxy name="SapProxy" startOnLoad="true" trace="disable"
  transports="https http" xmlns="http://ws.apache.org/ns/synapse">
  <target>
    <inSequence>
      <sequence key="SapBasicAuthenticationSequence"/>
      <sequence key="SapSendOutSequence"/>
      <send>
        <endpoint key="EsbFiddlerSapEndpoint"/>
      </send>
    </inSequence>
    <outSequence>
      <log/>
      <send/>
    </outSequence>
    <faultSequence>
      <log level="custom">
        <property name="text" value="An unexpected error occured"/>
        <property expression="get-property('ERROR_MESSAGE')" name="message"/>
        <property expression="get-property('ERROR_CODE')" name="code"/>
        <property expression="get-property('ERROR_DETAIL')" name="detail"/>
        <property expression="get-property('ERROR_EXCEPTION')" name="exception"/>
      </log>
      <send/>
    </faultSequence>
  </target>
</proxy>
